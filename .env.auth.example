# ============================================
# Authentication Configuration
# ============================================

# Domain Configuration
# Your domain name (used for OAuth redirect and cookie domain)
DOMAIN=obsidian.yourdomain.com

# OAuth2 Provider Settings
# For Supabase Auth: https://<project-ref>.supabase.co/auth/v1
# For other providers, see docs/providers/generic-oauth2.md
AUTH_OIDC_ISSUER_URL=https://your-project.supabase.co/auth/v1

# Provider Display Name (shown on login page)
# Examples: "Supabase Auth", "Google", "GitHub", "Company SSO"
AUTH_PROVIDER_DISPLAY_NAME=Supabase Auth

# OAuth2 Redirect URL
# IMPORTANT: Must match the protocol (http/https) of your deployment
# Production (HTTPS): https://obsidian.yourdomain.com/oauth2/callback
# Development (HTTP): http://localhost:8080/oauth2/callback
AUTH_REDIRECT_URL=https://obsidian.yourdomain.com/oauth2/callback

# OAuth2 Client Credentials
# Create these in your identity provider dashboard
# Supabase: Dashboard → Authentication → URL Configuration
AUTH_CLIENT_ID=your-oauth2-client-id
AUTH_CLIENT_SECRET=your-oauth2-client-secret

# Cookie Secret (must be 32+ characters, base64-encoded)
# Generate with: ./scripts/generate-cookie-secret.sh
# REQUIRED - Do not leave empty
AUTH_COOKIE_SECRET=

# Cookie Security
# Set to "false" only for local HTTP development (never in production!)
AUTH_COOKIE_SECURE=true

# Allowed Email Domains
# REQUIRED - Restrict access by email domain
# Examples:
#   - Single domain: yourdomain.com
#   - Multiple domains: yourdomain.com,partner.com,contractor.com
#   - Allow all (NOT RECOMMENDED): *
# SECURITY: Never use wildcard (*) in production without additional access controls
AUTH_EMAIL_DOMAINS=yourdomain.com

# Allowed Users (comma-separated email addresses, optional)
# Leave empty to allow all users from AUTH_EMAIL_DOMAINS
# Or specify exact emails: user1@yourdomain.com,user2@yourdomain.com
AUTH_ALLOWED_USERS=

# Provider-Specific Configuration
# Supabase Project Reference (for display/logging)
SUPABASE_PROJECT_REF=your-project-ref

# Advanced: Manual OIDC Endpoint Configuration
# Only needed if OIDC discovery is not working
# AUTH_OIDC_JWKS_URL=https://your-project.supabase.co/auth/v1/.well-known/jwks.json
# AUTH_OIDC_AUTH_URL=https://your-project.supabase.co/auth/v1/authorize
# AUTH_OIDC_TOKEN_URL=https://your-project.supabase.co/auth/v1/token
